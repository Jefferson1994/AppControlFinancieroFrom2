<div class="page-container" *ngIf="negocio">

  <div class="info-column">
    <header class="business-header">
      <h1>{{ negocio.nombre }}</h1>
      <div class="sub-header">
        <span>⭐ {{ negocio.rating }}</span>
        <span class="dot-separator">·</span>
        <span>{{ negocio.tipo }}</span>
        <span class="dot-separator">·</span>
        <a href="#">{{ negocio.direccion }}</a>
      </div>
    </header>

    <div class="photo-grid">
      <img [src]="negocio.fotos[0]" alt="Foto principal del negocio" class="main-photo">
      <div class="side-photos">
        <img [src]="negocio.fotos[1]" alt="Foto secundaria 1">
        <img [src]="negocio.fotos[2]" alt="Foto secundaria 2">
      </div>
    </div>

    <section class="services-section">
      <h2>Servicios</h2>
      <div class="service-list">
        <div class="service-item" *ngFor="let servicio of negocio.servicios" [class.selected]="servicio.id === reserva.servicio?.id">
          <div class="service-info">
            <h3>{{ servicio.nombre }}</h3>
            <p>{{ servicio.descripcion }}</p>
            <span>{{ servicio.duracion }} min · ${{ servicio.precio.toFixed(2) }}</span>
          </div>
          <button (click)="seleccionarServicio(servicio)">Seleccionar</button>
        </div>
      </div>
    </section>
  </div>

  <div class="booking-column">
    <div class="sticky-widget">
      <div *ngIf="!reserva.servicio" class="widget-placeholder">
        <p>Selecciona un servicio para ver los horarios disponibles.</p>
      </div>

      <div *ngIf="reserva.servicio" class="widget-content">
        <h3>Tu reserva</h3>
        <div class="selected-service">
          <span>{{ reserva.servicio.nombre }}</span>
          <span>${{ reserva.servicio.precio.toFixed(2) }}</span>
        </div>
        <hr>

        <div class="date-time-picker">
          <label for="fecha-reserva">Fecha</label>
          <input type="date" id="fecha-reserva" [(ngModel)]="reserva.fecha">

          <label>Hora</label>
          <div class="time-slots">
            <button
              *ngFor="let hora of horariosDisponibles"
              (click)="seleccionarHora(hora)"
              [class.selected]="hora === reserva.hora">
              {{ hora }}
            </button>
          </div>
        </div>

        <hr>
        <div class="price-summary">
          <span>Total</span>
          <strong>${{ precioTotal.toFixed(2) }}</strong>
        </div>

        <button class="reserve-button" [disabled]="!reserva.hora" (click)="irACheckout()">
          Continuar a la Reserva
        </button>
      </div>
    </div>
  </div>

</div>
